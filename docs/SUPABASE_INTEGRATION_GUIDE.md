# ğŸ—„ï¸ Supabaseçµ±åˆç®¡ç†ã‚¬ã‚¤ãƒ‰

## ğŸ“‚ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®

### **ç¾åœ¨ã®å®Ÿéš›æ§‹é€ **
```
camping-car-apps/
â”œâ”€â”€ supabase/                      # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤–)
â”‚   â”œâ”€â”€ config.toml               # Supabase CLIè¨­å®š
â”‚   â””â”€â”€ migrations/               # DBå¤‰æ›´å±¥æ­´
â”‚       â”œâ”€â”€ 20250131_purpose_checklist_tables.sql    # ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
â”‚       â”œâ”€â”€ 20250131_insert_purposes_data.sql        # ãƒ¡ã‚¤ãƒ³ãƒ»ã‚µãƒ–ç›®çš„
â”‚       â”œâ”€â”€ 20250131_insert_default_items.sql        # æŒã¡ç‰©ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚       â”œâ”€â”€ 20250131_enable_rls.sql                 # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
â”‚       â””â”€â”€ ä»–ã®Migrationãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ travel-journal/               # Reactã‚¢ãƒ—ãƒª
    â”œâ”€â”€ src/
    â”œâ”€â”€ docs/
    â””â”€â”€ package.json
```

### **ç®¡ç†å¯¾è±¡ã®æ˜ç¢ºåŒ–**

#### **ğŸ¯ travel-journal/ å†…ã§ç®¡ç†ã™ã¹ãã‚‚ã®**
```
âœ… ç›´æ¥ç®¡ç†:
- src/ (React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³)
- docs/ (ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ)  
- package.json (ä¾å­˜é–¢ä¿‚)
- scripts/ (è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«)
```

#### **ğŸ”— å¤–éƒ¨å‚ç…§ã§ç®¡ç†ã™ã¹ãã‚‚ã®**
```
ğŸ“‹ å‚ç…§ç®¡ç†:
- ../supabase/ (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š)
  - ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã®å‚ç…§
  - ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª
  - Migrationå±¥æ­´ã®è¿½è·¡
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ã®åˆ†é¡ã¨å½¹å‰²

### **1. ã‚¹ã‚­ãƒ¼ãƒå®šç¾© (ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ )**
**ğŸ“ å ´æ‰€**: `../supabase/migrations/20250131_purpose_checklist_tables.sql`

```sql
-- ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«
main_purposes       (ãƒ¡ã‚¤ãƒ³ç›®çš„ãƒã‚¹ã‚¿ãƒ¼)
sub_purposes        (ã‚µãƒ–ç›®çš„ãƒã‚¹ã‚¿ãƒ¼)  
default_items       (æŒã¡ç‰©ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ)

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«
trip_purposes       (å€‹äººã®é¸æŠã—ãŸç›®çš„)
trip_checklists     (å€‹äººã®æŒã¡ç‰©ãƒªã‚¹ãƒˆ)
```

### **2. ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ (é™çš„ãƒ»åŸºæº–ãƒ‡ãƒ¼ã‚¿)**
**ğŸ“ å ´æ‰€**: `../supabase/migrations/20250131_insert_*_data.sql`

#### **ãƒ¡ã‚¤ãƒ³ç›®çš„ (16ç¨®é¡)**
```
è¦³å…‰, SUPãƒ»ã‚«ãƒ¤ãƒƒã‚¯, ã‚µã‚¤ã‚¯ãƒªãƒ³ã‚°, ã‚¹ã‚­ãƒ¼ãƒ»ã‚¹ãƒãƒ¼ãƒœãƒ¼ãƒ‰, 
ç™»å±±ãƒ»ãƒã‚¤ã‚­ãƒ³ã‚°, ãƒ•ãƒ«ãƒ¼ãƒ„ç‹©ã‚Š, å¤œæ™¯æ’®å½±, å¤©ä½“è¦³æ¸¬,
æ—¥ã®å‡ºãƒ»å¤•é™½æ’®å½±, æµ·æ°´æµ´ãƒ»ã‚·ãƒ¥ãƒãƒ¼ã‚±ãƒªãƒ³ã‚°, æ½®å¹²ç‹©ã‚Š,
èŠ±è¦‹, ç´…è‘‰ç‹©ã‚Š, é‡é³¥è¦³å¯Ÿ, é‡£ã‚Š, é‰„é“æ’®å½±
```

#### **ã‚µãƒ–ç›®çš„ (11ç¨®é¡)**
```
æ¸©æ³‰, é“ã®é§…, ãƒãƒ¼ãƒ™ã‚­ãƒ¥ãƒ¼, ã‚­ãƒ£ãƒ³ãƒ—å ´, RVãƒ‘ãƒ¼ã‚¯,
åœ°å…ƒã‚°ãƒ«ãƒ¡, åœ°å…ƒç‰¹ç”£å“åº—, å±•æœ›å°, æ–‡åŒ–è²¡ãƒ»å²è·¡è¨ªå•,
å›½ç«‹å…¬åœ’, æ™¯å‹åœ°
```

#### **æŒã¡ç‰©ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ (85ä»¶)**
```
å„ãƒ¡ã‚¤ãƒ³ç›®çš„ Ã— 5ä»¶ã®å°‚é–€ç”¨å“
ä¾‹: SUPãƒ»ã‚«ãƒ¤ãƒƒã‚¯ â†’ SUPæœ¬ä½“, ãƒ‘ãƒ‰ãƒ«, ãƒ©ã‚¤ãƒ•ã‚¸ãƒ£ã‚±ãƒƒãƒˆ...
```

### **3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ (å‹•çš„ãƒ»å€‹äººãƒ‡ãƒ¼ã‚¿)**
**ğŸ  æ ¼ç´**: Supabaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†… (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ )

```
å€‹äººã®æ—…è¡Œè¨ˆç”» â†’ trip_purposes
å€‹äººã®æŒã¡ç‰©   â†’ trip_checklists
å€‹äººã®è©•ä¾¡     â†’ trip_reviews
```

## ğŸ”§ é–‹ç™ºæ™‚ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ

### **Migrationå®Ÿè¡Œæ‰‹é †**
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ (camping-car-apps/) ã§å®Ÿè¡Œ
cd /Users/syokota_mac/Desktop/claude-code/learning-projects/camping-car-apps

# Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ³ã‚¯ç¢ºèª
supabase status

# Migrationå®Ÿè¡Œ (åˆ¶é™è§£é™¤å¾Œ)
supabase db push

# ç‰¹å®šMigrationã®ã¿å®Ÿè¡Œ
supabase db push --dry-run  # ç¢ºèª
supabase db push            # å®Ÿè¡Œ
```

### **ãƒ‡ãƒ¼ã‚¿ç¢ºèªæ–¹æ³•**
```bash
# ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ç¢ºèª
supabase db list

# ãƒ‡ãƒ¼ã‚¿ç¢ºèª (SQL Editorä½¿ç”¨)
# Supabase Dashboard â†’ SQL Editor
SELECT * FROM main_purposes ORDER BY display_order;
SELECT * FROM sub_purposes ORDER BY display_order;
```

## ğŸ“‹ ç®¡ç†ãƒ«ãƒ¼ãƒ«ã®çµ±åˆ

### **travel-journal/ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ãƒ«ãƒ¼ãƒ«**

#### **âœ… ç›´æ¥ç®¡ç†å¯¾è±¡**
```
- src/components/*.jsx     (React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)
- docs/*.md               (ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ)
- scripts/*.sh            (è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ)
- package.json            (ä¾å­˜é–¢ä¿‚)
```

#### **ğŸ”— å‚ç…§ç®¡ç†å¯¾è±¡**
```
- ../supabase/migrations/ (Migration ãƒ•ã‚¡ã‚¤ãƒ«)
  â†’ å¤‰æ›´æ™‚ã¯å¿…ãšç¢ºèªãƒ»ãƒ†ã‚¹ãƒˆ
  â†’ æ–°è¦Migrationä½œæˆæ™‚ã¯å‘½åè¦å‰‡çµ±ä¸€
```

#### **ğŸ“Š ãƒ•ã‚¡ã‚¤ãƒ«æ•°åŸºæº– (æ›´æ–°ç‰ˆ)**
```
travel-journal/ å†…:
- MDãƒ•ã‚¡ã‚¤ãƒ« â‰¤ 15å€‹
- JSãƒ•ã‚¡ã‚¤ãƒ« â‰¤ 10å€‹  
- JSXãƒ•ã‚¡ã‚¤ãƒ« â‰¤ 25å€‹

å‚ç…§å¯¾è±¡ (../supabase/):
- Migrationãƒ•ã‚¡ã‚¤ãƒ«: åˆ¶é™ãªã— (å±¥æ­´ä¿æŒ)
- å‘½åè¦å‰‡: YYYYMMDD_descriptive_name.sql
```

### **Supabaseé–¢é€£ä½œæ¥­æ™‚ã®æ³¨æ„äº‹é …**

#### **ğŸ›‘ çµ¶å¯¾ç¦æ­¢**
```
âŒ travel-journal/ å†…ã§ã®SQLç›´æ¥ä½œæˆ
âŒ ä¸€æ™‚çš„ãª*.sqlãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ«ãƒ¼ãƒˆé…ç½®  
âŒ Migrationå±¥æ­´ã®ç›´æ¥ç·¨é›†
âŒ ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ä¸ç”¨æ„ãªå¤‰æ›´
```

#### **âœ… æ¨å¥¨æ–¹æ³•**
```
âœ… ../supabase/migrations/ ã§ã®ä½œæ¥­
âœ… supabase CLIä½¿ç”¨
âœ… å¤‰æ›´å‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
âœ… æ®µéšçš„ãªMigrationå®Ÿè¡Œ
```

## ğŸš¨ ç·Šæ€¥æ™‚å¯¾å¿œ

### **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯æ™‚**
1. **åˆ¶é™ç¢ºèª**: Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§åˆ¶é™çŠ¶æ³ç¢ºèª
2. **Migrationæº–å‚™**: åˆ¶é™è§£é™¤å¾Œã®å³åº§å®Ÿè¡Œæº–å‚™
3. **ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿**: `src/data/mockData.js` ã§ã®ä¸€æ™‚é–‹ç™ºç¶™ç¶š

### **Migrationå¤±æ•—æ™‚**
```bash
# ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
supabase db reset

# ç‰¹å®šæ™‚ç‚¹å¾©å…ƒ
supabase db reset --to-timestamp "2025-08-09T00:00:00Z"

# æ‰‹å‹•ä¿®æ­£å¾Œå†å®Ÿè¡Œ
supabase db push
```

## ğŸ“š å‚è€ƒã‚³ãƒãƒ³ãƒ‰é›†

### **æ—¥å¸¸æ“ä½œ**
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•
cd /Users/syokota_mac/Desktop/claude-code/learning-projects/camping-car-apps

# SupabaseçŠ¶æ³ç¢ºèª
supabase status

# MigrationçŠ¶æ³ç¢ºèª  
supabase migration list

# ãƒ­ãƒ¼ã‚«ãƒ«DBèµ·å‹• (é–‹ç™ºæ™‚)
supabase start

# ãƒ­ãƒ¼ã‚«ãƒ«DBåœæ­¢
supabase stop
```

### **ãƒ‡ãƒ¼ã‚¿ç¢ºèª**
```bash
# SQLå®Ÿè¡Œ (CLI)
supabase db sql --file migrations/check_data.sql

# ãƒ†ãƒ¼ãƒ–ãƒ«æƒ…å ±
supabase db describe main_purposes
```

## ğŸ¯ çµ±åˆç®¡ç†ã®æ–¹é‡

### **è²¬ä»»åˆ†æ‹…**
- **travel-journal/**: React ã‚¢ãƒ—ãƒªã®é–‹ç™ºãƒ»UI/UX
- **../supabase/**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ãƒ»ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ç®¡ç†

### **é€£æºæ–¹æ³•**  
- Migrationå¤‰æ›´æ™‚ã¯å¿…ãšå‹•ä½œç¢ºèª
- æ–°è¦ãƒ‡ãƒ¼ã‚¿è¿½åŠ æ™‚ã¯Migrationä½œæˆ
- åˆ¶é™è§£é™¤å¾Œã®å¾©æ—§ã¯Migrationä¸€æ‹¬å®Ÿè¡Œ

---

**ğŸ“… ä½œæˆ**: 2025å¹´8æœˆ9æ—¥  
**ğŸ¯ ç›®çš„**: Supabaseã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã®çµ±åˆ  
**ğŸ”— é–¢é€£**: PROJECT_MANAGEMENT_RULES.md, CLAUDE.md